import java.util.Scanner;

public class InventarioTienda {

    static String[] nombres;
    static int[] cantidades;
    static double[] precios;
    static double[] totales;

    static int[][] categorias;

    static int numProductos = 0;
    static int capacidad = 5;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        nombres = new String[capacidad];
        cantidades = new int[capacidad];
        precios = new double[capacidad];
        totales = new double[capacidad];

        categorias = new int[3][10];
        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 10; j++) {
                categorias[i][j] = -1;
            }
        }

        System.out.println("Bienvenido al sistema de inventario de la tienda");

        for (int i = 0; i < 5; i++) {
            agregarProducto(sc);
        }

        boolean continuar = true;
        while (continuar) {
            System.out.println("\nSeleccione una opción:");
            System.out.println("1. Agregar nuevo producto");
            System.out.println("2. Actualizar cantidad de un producto");
            System.out.println("3. Mostrar reporte final");
            System.out.println("4. Salir");
            System.out.print("Opción: ");
            int opcion = sc.nextInt();
            sc.nextLine();

            switch (opcion) {
                case 1:
                    agregarProducto(sc);
                    break;
                case 2:
                    actualizarCantidad(sc);
                    break;
                case 3:
                    generarReporte();
                    break;
                case 4:
                    continuar = false;
                    System.out.println("Gracias por usar el sistema.");
                    break;
                default:
                    System.out.println("Opción no válida, intente de nuevo.");
            }
        }

        sc.close();
    }

    public static void agregarProducto(Scanner sc) {
        if (numProductos == capacidad) {
            ampliarCapacidad();
        }

        System.out.print("Ingrese el nombre del producto " + (numProductos + 1) + ": ");
        String nombre = sc.nextLine();

        System.out.print("Ingrese la cantidad en inventario: ");
        int cantidad = sc.nextInt();

        System.out.print("Precio por unidad: ");
        double precio = sc.nextDouble();

        sc.nextLine();

        nombres[numProductos] = nombre;
        cantidades[numProductos] = cantidad;
        precios[numProductos] = precio;
        totales[numProductos] = cantidad * precio;

        System.out.println("Seleccione la categoría del producto:");
        System.out.println("0 - Alimentos");
        System.out.println("1 - Limpieza");
        System.out.println("2 - Bebidas");
        System.out.print("Categoría: ");
        int cat = sc.nextInt();
        sc.nextLine();

        for (int i = 0; i < categorias[cat].length; i++) {
            if (categorias[cat][i] == -1) {
                categorias[cat][i] = numProductos;
                break;
            }
        }

        numProductos++;
        System.out.println("Producto agregado correctamente.");
    }

    public static void ampliarCapacidad() {
        capacidad *= 2;

        String[] nuevosNombres = new String[capacidad];
        int[] nuevasCantidades = new int[capacidad];
        double[] nuevosPrecios = new double[capacidad];
        double[] nuevosTotales = new double[capacidad];

        for (int i = 0; i < numProductos; i++) {
            nuevosNombres[i] = nombres[i];
            nuevasCantidades[i] = cantidades[i];
            nuevosPrecios[i] = precios[i];
            nuevosTotales[i] = totales[i];
        }

        nombres = nuevosNombres;
        cantidades = nuevasCantidades;
        precios = nuevosPrecios;
        totales = nuevosTotales;

        System.out.println("Capacidad ampliada a " + capacidad + " productos.");
    }

    public static void actualizarCantidad(Scanner sc) {
        System.out.print("Ingrese el nombre del producto a actualizar: ");
        String nombreBuscado = sc.nextLine();

        int indice = -1;
        for (int i = 0; i < numProductos; i++) {
            if (nombres[i].equalsIgnoreCase(nombreBuscado)) {
                indice = i;
                break;
            }
        }

        if (indice == -1) {
            System.out.println("Producto no encontrado.");
            return;
        }

        System.out.print("Ingrese la cantidad adicional que llegó: ");
        int cantidadAdicional = sc.nextInt();
        sc.nextLine();

        cantidades[indice] += cantidadAdicional;
        totales[indice] = cantidades[indice] * precios[indice];

        System.out.println("Cantidad actualizada. Nueva cantidad: " + cantidades[indice]);
    }

    public static void generarReporte() {
        double valorTotalInventario = 0;

        System.out.println("\n--- Inventario de la tienda ---");
        for (int i = 0; i < numProductos; i++) {
            System.out.print("Producto: " + nombres[i] +
                    " | Cantidad: " + cantidades[i] +
                    " | Precio: " + precios[i] +
                    " | Total: " + totales[i]);

            if (cantidades[i] < 9) {
                System.out.print("  <-- ALERTA: Stock bajo, restablecer pronto!");
            }
            System.out.println();

            valorTotalInventario += totales[i];
        }
        System.out.println("Valor total del inventario: " + valorTotalInventario);
    }
}

